<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragments/layout :: layout(~{::title}, ~{::content})}">
<head>
    <title th:text="${claseDTO.idClase == null ? 'Nueva Clase' : 'Editar Clase'} + ' - FitnessApp'">Clase - FitnessApp</title>
</head>
<body>
    <div th:fragment="content">
        <div class="row row-cards">
            <div class="col-12">
                <form th:action="@{/clases/guardar}" 
                      method="post" th:object="${claseDTO}">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <input type="hidden" th:if="${claseDTO.idClase != null}" th:field="*{idClase}">
                    
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" th:text="${claseDTO.idClase == null ? 'Nueva Clase' : 'Editar Clase'}">Formulario Clase</h3>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-8 mb-3">
                                    <label class="form-label required">Nombre</label>
                                    <input type="text" class="form-control" 
                                           th:field="*{nombre}"
                                           th:classappend="${#fields.hasErrors('nombre')} ? 'is-invalid' : ''"
                                           placeholder="Ingrese el nombre de la clase">
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('nombre')}" 
                                         th:errors="*{nombre}">Error</div>
                                </div>
                                
                                <div class="col-md-4 mb-3">
                                    <label class="form-label required">Nivel</label>
                                    <select class="form-control" 
                                            th:field="*{nivel}"
                                            th:classappend="${#fields.hasErrors('nivel')} ? 'is-invalid' : ''">
                                        <option value="">-- Seleccione un nivel --</option>
                                        <option th:each="nivel : ${niveles}" th:value="${nivel}" th:text="${nivel}"></option>
                                    </select>
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('nivel')}" 
                                         th:errors="*{nivel}">Error</div>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Descripci칩n</label>
                                <textarea class="form-control" 
                                          th:field="*{descripcion}"
                                          rows="4"
                                          placeholder="Ingrese una descripci칩n de la clase"></textarea>
                                <div class="invalid-feedback" th:if="${#fields.hasErrors('descripcion')}" 
                                     th:errors="*{descripcion}">Error</div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label required">Duraci칩n (minutos)</label>
                                    <input type="number" class="form-control" 
                                           th:field="*{duracionMinutos}"
                                           th:classappend="${#fields.hasErrors('duracionMinutos')} ? 'is-invalid' : ''"
                                           min="1"
                                           placeholder="60">
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('duracionMinutos')}" 
                                         th:errors="*{duracionMinutos}">Error</div>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <label class="form-label required">Capacidad M치xima</label>
                                    <input type="number" class="form-control" 
                                           th:field="*{capacidadMaxima}"
                                           th:classappend="${#fields.hasErrors('capacidadMaxima')} ? 'is-invalid' : ''"
                                           min="1"
                                           placeholder="20">
                                    <div class="invalid-feedback" th:if="${#fields.hasErrors('capacidadMaxima')}" 
                                         th:errors="*{capacidadMaxima}">Error</div>
                                </div>
                            </div>
                            
                            <div class="mb-3" th:if="${claseDTO.idClase != null}">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" th:field="*{estado}">
                                    <span class="form-check-label">Clase activa</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="card-footer text-end">
                            <div class="d-flex">
                                <a href="/clases" class="btn btn-link">Cancelar</a>
                                <button type="submit" class="btn btn-primary ms-auto">
                                    <i class="ti ti-device-floppy icon"></i>
                                    Guardar
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
